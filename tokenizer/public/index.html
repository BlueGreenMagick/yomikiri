<html>
  <head>
    <title>Testing Lindera-js japanese word tokenization</title>
    <style>
      .word {
        position: relative;
      }

      .word::after {
        content: "";
        position: absolute;
        left: 1px;
        bottom: 0;
        border-bottom: 1px solid black;
        right: 1px;
      }

      .tooltip {
        background-color: lightgray;
        position: absolute;
        z-index: 1;
        top: 105%;
        left: 0;
        width: 200px;
      }

      .tooltip {
        display: none;
      }

      .word:hover .tooltip {
        display: inline;
      }
    </style>
  </head>
  <body>
    <input id="input" type="text" />
    <button id="button">Tokenize</button>
    <div id="output"></div>
    <script type="module">
      import load from "./tokenizer.js";

      async function loadTokenizer() {
        const Tokenizer = await load();
        return new Tokenizer();
      }
      const tokenizer = loadTokenizer();

      document.getElementById("button").addEventListener("click", async () => {
        const text = document.getElementById("input").value;
        const outputEl = document.getElementById("output");
        const tokens = (await tokenizer).tokenize(text);

        outputEl.innerHTML = "";
        for (const token of tokens) {
          const span = document.createElement("span");
          span.classList.add("word");
          span.innerText = token.text;

          const tooltip = document.createElement("span");
          tooltip.classList.add("tooltip");
          tooltip.innerText =
            token.partOfSpeech + ", " + token.baseForm + ` [${token.reading}]`;

          span.appendChild(tooltip);
          outputEl.appendChild(span);
        }
      });
    </script>
  </body>
</html>
